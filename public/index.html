<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Caddy - Custom Build with Plugins</title>
    <meta
      name="description"
      content="Custom Caddy web server build with essential plugins for modern deployments."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-primary: #0a0a0b;
        --bg-secondary: #111113;
        --bg-card: #18181b;
        --border: #27272a;
        --text-primary: #fafafa;
        --text-secondary: #a1a1aa;
        --accent: #22d3ee;
        --accent-glow: rgba(34, 211, 238, 0.15);
        --green: #22c55e;
        --orange: #f59e0b;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          "Inter",
          -apple-system,
          BlinkMacSystemFont,
          sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
      }

      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }

      ::-webkit-scrollbar-track {
        background: transparent;
      }

      ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--text-secondary);
      }

      * {
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 24px;
      }

      header {
        padding: 24px 0;
        border-bottom: 1px solid var(--border);
        position: sticky;
        top: 0;
        background: rgba(10, 10, 11, 0.8);
        backdrop-filter: blur(12px);
        z-index: 100;
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.25rem;
        font-weight: 600;
      }

      .header-links {
        display: flex;
        gap: 16px;
        align-items: center;
      }

      .header-link {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-secondary);
        text-decoration: none;
        font-size: 0.875rem;
        transition: color 0.2s;
      }

      .header-link:hover {
        color: var(--text-primary);
      }

      .header-link svg {
        width: 20px;
        height: 20px;
      }

      .hero {
        padding: 80px 0 60px;
        text-align: center;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: var(--accent-glow);
        border: 1px solid rgba(34, 211, 238, 0.3);
        color: var(--accent);
        padding: 6px 14px;
        border-radius: 100px;
        font-size: 0.8rem;
        font-weight: 500;
        margin-bottom: 24px;
      }

      .badge-dot {
        width: 6px;
        height: 6px;
        background: var(--green);
        border-radius: 50%;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      h1 {
        font-size: clamp(2.5rem, 5vw, 3.5rem);
        font-weight: 700;
        letter-spacing: -0.02em;
        margin-bottom: 16px;
        background: linear-gradient(
          to right,
          var(--text-primary),
          var(--text-secondary)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .hero p {
        font-size: 1.125rem;
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0 auto 32px;
      }

      .version-info {
        display: flex;
        justify-content: center;
        gap: 16px;
        flex-wrap: wrap;
        margin-top: 24px;
      }

      .version-badge {
        display: flex;
        align-items: center;
        gap: 8px;
        background: var(--bg-card);
        border: 1px solid var(--border);
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 0.875rem;
      }

      .version-badge strong {
        color: var(--accent);
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-top: 48px;
      }

      .stat-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 20px;
        text-align: center;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent);
        display: block;
      }

      .stat-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-top: 4px;
      }

      .features {
        padding: 60px 0;
        border-top: 1px solid var(--border);
      }

      .section-title {
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-secondary);
        margin-bottom: 24px;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 16px;
      }

      .feature-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 24px;
      }

      .feature-icon {
        font-size: 2rem;
        margin-bottom: 12px;
        display: block;
      }

      .feature-card h3 {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .feature-card p {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      .plugins {
        padding: 60px 0;
      }

      .plugins-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 16px;
      }

      .plugin-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 20px;
        transition:
          border-color 0.2s,
          transform 0.2s;
      }

      .plugin-card:hover {
        border-color: var(--accent);
        transform: translateY(-2px);
      }

      .plugin-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 8px;
      }

      .plugin-card h3 {
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .plugin-card h3 span {
        font-size: 1.1rem;
      }

      .plugin-version {
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: 500;
        background: rgba(34, 211, 238, 0.15);
        border: 1px solid rgba(34, 211, 238, 0.3);
        color: var(--accent);
      }

      .plugin-card p {
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-bottom: 12px;
      }

      .plugin-links {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .plugin-card a {
        color: var(--accent);
        text-decoration: none;
        font-size: 0.8rem;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .plugin-card a:hover {
        text-decoration: underline;
      }

      .install {
        padding: 60px 0;
        border-top: 1px solid var(--border);
      }

      .code-block {
        background: var(--bg-secondary);
        border: 1px solid var(--border);
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 24px;
      }

      .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        border-bottom: 1px solid var(--border);
        background: var(--bg-card);
      }

      .code-title {
        font-size: 0.8rem;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .copy-btn {
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text-secondary);
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.75rem;
        cursor: pointer;
        transition: all 0.2s;
        font-family: inherit;
      }

      .copy-btn:hover {
        background: var(--bg-card);
        color: var(--text-primary);
      }

      .copy-btn.copied {
        background: var(--green);
        color: var(--bg-primary);
        border-color: var(--green);
      }

      .code-content {
        padding: 20px;
        overflow-x: auto;
      }

      .code-content pre {
        font-family: "SF Mono", "Fira Code", monospace;
        font-size: 0.875rem;
        line-height: 1.7;
        color: var(--text-secondary);
      }

      .code-content .comment {
        color: #6b7280;
      }

      .code-content .command {
        color: var(--accent);
      }

      .code-content .string {
        color: var(--green);
      }

      .requirements {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 20px;
        margin-top: 24px;
      }

      .requirements h3 {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .requirements ul {
        list-style: none;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 8px;
      }

      .requirements li {
        font-size: 0.875rem;
        color: var(--text-secondary);
        padding-left: 20px;
        position: relative;
      }

      .requirements li::before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: var(--green);
        font-weight: bold;
      }

      .migrate {
        margin-top: 32px;
      }

      .migrate-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
      }

      .migrate-header h3 {
        font-size: 1rem;
        font-weight: 600;
      }

      .migrate-badge {
        background: rgba(34, 197, 94, 0.15);
        border: 1px solid rgba(34, 197, 94, 0.3);
        color: var(--green);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: 500;
      }

      .migrate p {
        color: var(--text-secondary);
        font-size: 0.875rem;
        margin-bottom: 12px;
      }

      .oneliner {
        background: var(--bg-secondary);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 16px 20px;
        font-family: "SF Mono", "Fira Code", monospace;
        font-size: 0.875rem;
        color: var(--accent);
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 16px;
      }

      .oneliner code {
        overflow-x: auto;
        display: block;
      }

      .verification {
        margin-top: 32px;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 20px;
      }

      .verification h3 {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .verification-steps {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-top: 16px;
      }

      .verification-step {
        display: flex;
        gap: 12px;
      }

      .step-number {
        flex-shrink: 0;
        width: 24px;
        height: 24px;
        background: var(--accent-glow);
        border: 1px solid rgba(34, 211, 238, 0.3);
        color: var(--accent);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
      }

      .step-content h4 {
        font-size: 0.875rem;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .step-content p {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      .step-content code {
        background: var(--bg-secondary);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.8rem;
        color: var(--accent);
        font-family: "SF Mono", "Fira Code", monospace;
      }

      .quickstart {
        padding: 60px 0;
        border-top: 1px solid var(--border);
      }

      .example-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 16px;
        border-bottom: 1px solid var(--border);
        overflow-x: auto;
      }

      .tab-btn {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        padding: 12px 20px;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.875rem;
        font-weight: 500;
        border-bottom: 2px solid transparent;
        transition: all 0.2s;
        white-space: nowrap;
      }

      .tab-btn:hover {
        color: var(--text-primary);
      }

      .tab-btn.active {
        color: var(--accent);
        border-bottom-color: var(--accent);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      footer {
        padding: 40px 0;
        border-top: 1px solid var(--border);
        text-align: center;
      }

      footer p {
        color: var(--text-secondary);
        font-size: 0.875rem;
      }

      footer a {
        color: var(--accent);
        text-decoration: none;
      }

      footer a:hover {
        text-decoration: underline;
      }

      .loading {
        text-align: center;
        padding: 60px 0;
        color: var(--text-secondary);
      }

      .error {
        background: rgba(239, 68, 68, 0.15);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #ef4444;
        padding: 16px;
        border-radius: 8px;
        margin: 24px 0;
        font-size: 0.875rem;
      }

      @media (max-width: 640px) {
        .hero {
          padding: 60px 0 40px;
        }
        .features,
        .plugins,
        .install,
        .quickstart {
          padding: 40px 0;
        }
        .stats {
          grid-template-columns: 1fr;
        }
        .oneliner {
          flex-direction: column;
          align-items: stretch;
        }
        .header-links {
          gap: 8px;
        }
        .header-link span {
          display: none;
        }
        .version-info {
          flex-direction: column;
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container header-content">
        <div class="logo">Caddy</div>
        <div class="header-links">
          <a href="#install" class="header-link">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"
              />
            </svg>
            <span>Install</span>
          </a>
          <a
            href="https://github.com/crazyuploader/caddy"
            class="header-link"
            target="_blank"
            rel="noopener"
          >
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
              />
            </svg>
            <span>GitHub</span>
          </a>
        </div>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container">
          <div class="badge">
            <span class="badge-dot"></span>
            Production Ready
          </div>
          <h1>Caddy with Enterprise Plugins</h1>
          <p>
            Pre-built Caddy web server with essential plugins for DNS
            challenges, distributed storage, and high-performance compression.
            Install in seconds via APT.
          </p>

          <div class="version-info" id="version-info">
            <div class="loading">Loading build information...</div>
          </div>

          <div class="stats">
            <div class="stat-card">
              <span class="stat-value" id="plugin-count">-</span>
              <span class="stat-label">Plugins Included</span>
            </div>
            <div class="stat-card">
              <span class="stat-value">100%</span>
              <span class="stat-label">Open Source</span>
            </div>
            <div class="stat-card">
              <span class="stat-value">Auto</span>
              <span class="stat-label">HTTPS by Default</span>
            </div>
          </div>
        </div>
      </section>

      <section class="features">
        <div class="container">
          <h2 class="section-title">Why Use This Build?</h2>
          <div class="features-grid">
            <div class="feature-card">
              <span class="feature-icon">üéØ</span>
              <h3>Production Optimized</h3>
              <p>
                Carefully selected plugins for real-world deployments with
                wildcard certificates, distributed storage, and optimal
                compression.
              </p>
            </div>
            <div class="feature-card">
              <span class="feature-icon">üîÑ</span>
              <h3>Always Updated</h3>
              <p>
                Automated builds ensure you get the latest stable Caddy version
                with security patches and plugin updates.
              </p>
            </div>
            <div class="feature-card">
              <span class="feature-icon">üöÄ</span>
              <h3>Zero Downtime</h3>
              <p>
                Graceful reloads and hot config updates mean you never have to
                stop your server for configuration changes.
              </p>
            </div>
            <div class="feature-card">
              <span class="feature-icon">üîê</span>
              <h3>Secure by Default</h3>
              <p>
                Automatic HTTPS with Let's Encrypt, modern TLS defaults, and
                battle-tested security configurations out of the box.
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="plugins">
        <div class="container">
          <h2 class="section-title">Included Plugins</h2>
          <div class="plugins-grid" id="plugins-grid">
            <div class="loading">Loading plugins...</div>
          </div>
        </div>
      </section>

      <section class="install" id="install">
        <div class="container">
          <h2 class="section-title">Installation</h2>

          <div class="code-block">
            <div class="code-header">
              <span class="code-title">Terminal</span>
              <button
                class="copy-btn"
                onclick="copyCode(this)"
                aria-label="Copy installation commands"
              >
                Copy
              </button>
            </div>
            <div class="code-content">
              <pre><span class="comment"># Add GPG key for package verification</span>
<span class="command">curl</span> -fsSL https://caddy.devjugal.com/public.key | sudo gpg --dearmor -o /usr/share/keyrings/caddy-custom.gpg

<span class="comment"># Add APT repository</span>
<span class="command">echo</span> <span class="string">"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/caddy-custom.gpg] https://caddy.devjugal.com stable main"</span> | sudo tee /etc/apt/sources.list.d/caddy-custom.list

<span class="comment"># Update and install</span>
sudo apt update && sudo apt install caddy</pre>
            </div>
          </div>

          <div class="requirements">
            <h3>üìã System Requirements</h3>
            <ul>
              <li>Ubuntu 20.04, 22.04, 24.04</li>
              <li>Debian 11 (Bullseye) or newer</li>
              <li>64-bit architecture (amd64/arm64)</li>
            </ul>
          </div>

          <div class="verification">
            <h3>‚úì Verify Installation</h3>
            <div class="verification-steps">
              <div class="verification-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>Check version</h4>
                  <p>
                    <code>caddy version</code> - Should show custom build info
                  </p>
                </div>
              </div>
              <div class="verification-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>List modules</h4>
                  <p>
                    <code>caddy list-modules</code> - Verify plugins are loaded
                  </p>
                </div>
              </div>
              <div class="verification-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>Test configuration</h4>
                  <p><code>caddy validate</code> - Check Caddyfile syntax</p>
                </div>
              </div>
            </div>
          </div>

          <div class="migrate">
            <div class="migrate-header">
              <h3>Migrating from Official Caddy?</h3>
              <span class="migrate-badge">One-liner</span>
            </div>
            <p>
              Automatically backs up your configs, disables the official
              repository, and switches to this custom build without data loss.
            </p>
            <div class="oneliner">
              <code
                >curl -fsSL https://caddy.devjugal.com/migrate.sh | sudo
                bash</code
              >
              <button
                class="copy-btn"
                onclick="copyMigrate(this)"
                aria-label="Copy migration command"
              >
                Copy
              </button>
            </div>
          </div>
        </div>
      </section>

      <section class="quickstart" id="quickstart">
        <div class="container">
          <h2 class="section-title">Quick Start Examples</h2>

          <div class="example-tabs" id="example-tabs">
            <!-- Tabs will be dynamically generated -->
          </div>

          <div id="examples-content">
            <!-- Example content will be dynamically generated -->
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <p>
          Built with ‚ö° by
          <a
            href="https://github.com/crazyuploader"
            target="_blank"
            rel="noopener"
          >
            crazyuploader
          </a>
          ¬∑
          <a
            href="https://github.com/crazyuploader/caddy"
            target="_blank"
            rel="noopener"
          >
            View Source
          </a>
          ¬∑
          <a
            href="https://github.com/crazyuploader/caddy/issues"
            target="_blank"
            rel="noopener"
          >
            Report Issue
          </a>
        </p>
      </div>
    </footer>

    <script>
      // Load build metadata from JSON
      async function loadBuildMetadata() {
        try {
          const response = await fetch("build-metadata.json");
          if (!response.ok) {
            throw new Error("Failed to load build metadata");
          }
          const data = await response.json();
          populatePage(data);
        } catch (error) {
          console.error("Error loading build metadata:", error);
          showError(
            "Failed to load build information. Please check if build-metadata.json exists.",
          );
        }
      }

      function populatePage(data) {
        // Populate version info
        const versionInfo = document.getElementById("version-info");
        versionInfo.innerHTML = `
          <div class="version-badge">
            <span>Caddy</span>
            <strong>${escapeHtml(data.caddy_version)}</strong>
          </div>
          <div class="version-badge">
            <span>Go</span>
            <strong>${escapeHtml(data.go_version)}</strong>
          </div>
          <div class="version-badge">
            <span>Built</span>
            <strong>${escapeHtml(data.build_date)}</strong>
          </div>
        `;

        // Update plugin count
        document.getElementById("plugin-count").textContent =
          data.plugins.length;

        // Populate plugins
        populatePlugins(data.plugins);

        // Populate examples if available
        if (data.examples && data.examples.length > 0) {
          populateExamples(data.examples);
        } else {
          document.getElementById("quickstart").style.display = "none";
        }
      }

      function populatePlugins(plugins) {
        const pluginsGrid = document.getElementById("plugins-grid");

        if (plugins.length === 0) {
          pluginsGrid.innerHTML =
            '<p class="error">No plugins found in build metadata.</p>';
          return;
        }

        pluginsGrid.innerHTML = plugins
          .map(
            (plugin) => `
          <div class="plugin-card">
            <div class="plugin-header">
              <h3>
                <span>${escapeHtml(plugin.icon || "üì¶")}</span>
                ${escapeHtml(plugin.name)}
              </h3>
              ${plugin.version ? `<span class="plugin-version">${escapeHtml(plugin.version)}</span>` : ""}
            </div>
            <p>${escapeHtml(plugin.description)}</p>
            <div class="plugin-links">
              ${
                plugin.repo_url
                  ? `
                <a href="${escapeHtml(plugin.repo_url)}" target="_blank" rel="noopener">
                  Repository ‚Üí
                </a>
              `
                  : ""
              }
              ${
                plugin.docs_url
                  ? `
                <a href="${escapeHtml(plugin.docs_url)}" target="_blank" rel="noopener">
                  Documentation ‚Üí
                </a>
              `
                  : ""
              }
            </div>
          </div>
        `,
          )
          .join("");
      }

      function populateExamples(examples) {
        const tabsContainer = document.getElementById("example-tabs");
        const contentContainer = document.getElementById("examples-content");

        // Generate tabs
        tabsContainer.innerHTML = examples
          .map(
            (example, index) => `
          <button class="tab-btn ${index === 0 ? "active" : ""}" 
                  onclick="switchTab(event, 'example-${index}')"
                  aria-label="Show ${escapeHtml(example.name)} example">
            ${escapeHtml(example.name)}
          </button>
        `,
          )
          .join("");

        // Generate content
        contentContainer.innerHTML = examples
          .map(
            (example, index) => `
          <div id="example-${index}" class="tab-content ${index === 0 ? "active" : ""}">
            <div class="code-block">
              <div class="code-header">
                <span class="code-title">${escapeHtml(example.title || "Caddyfile")}</span>
                <button class="copy-btn" onclick="copyExample(this, 'example-${index}-code')" 
                        aria-label="Copy ${escapeHtml(example.name)} example">
                  Copy
                </button>
              </div>
              <div class="code-content">
                <pre id="example-${index}-code">${escapeHtml(example.code)}</pre>
              </div>
            </div>
            ${example.note ? `<p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 12px;">${escapeHtml(example.note)}</p>` : ""}
          </div>
        `,
          )
          .join("");
      }

      function showError(message) {
        const versionInfo = document.getElementById("version-info");
        versionInfo.innerHTML = `<div class="error">${escapeHtml(message)}</div>`;

        const pluginsGrid = document.getElementById("plugins-grid");
        pluginsGrid.innerHTML = `<div class="error">${escapeHtml(message)}</div>`;
      }

      function escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }

      function copyCode(btn) {
        const code = `curl -fsSL https://caddy.devjugal.com/public.key | sudo gpg --dearmor -o /usr/share/keyrings/caddy-custom.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/caddy-custom.gpg] https://caddy.devjugal.com stable main" | sudo tee /etc/apt/sources.list.d/caddy-custom.list
sudo apt update && sudo apt install caddy`;

        copyToClipboard(code, btn);
      }

      function copyMigrate(btn) {
        const code =
          "curl -fsSL https://caddy.devjugal.com/migrate.sh | sudo bash";
        copyToClipboard(code, btn);
      }

      function copyExample(btn, id) {
        const code = document.getElementById(id).textContent;
        copyToClipboard(code, btn);
      }

      function copyToClipboard(text, btn) {
        navigator.clipboard
          .writeText(text)
          .then(() => {
            const originalText = btn.textContent;
            btn.textContent = "Copied!";
            btn.classList.add("copied");

            setTimeout(() => {
              btn.textContent = originalText;
              btn.classList.remove("copied");
            }, 2000);
          })
          .catch((err) => {
            console.error("Failed to copy:", err);
            btn.textContent = "Failed";
            setTimeout(() => {
              btn.textContent = "Copy";
            }, 2000);
          });
      }

      function switchTab(event, tabId) {
        document.querySelectorAll(".tab-content").forEach((tab) => {
          tab.classList.remove("active");
        });

        document.querySelectorAll(".tab-btn").forEach((btn) => {
          btn.classList.remove("active");
        });

        document.getElementById(tabId).classList.add("active");
        event.target.classList.add("active");
      }

      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });

      // Load metadata on page load
      loadBuildMetadata();
    </script>
  </body>
</html>
